_meta:
  urn: urn:goreos:entity:d_gestion:ENT-GESTION-COMPROMISOGESTION:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_compromiso
  type: String
  key: true
  description: 'Identificador único (ej: CG-2025-001)'
- name: instancia_id
  type: String
  fk: ENT-GESTION-INSTANCIA
  nullable: false
  description: Instancia de origen
- name: numero_punto
  type: Integer
  nullable: true
  description: Punto de tabla origen
- name: descripcion
  type: Text
  nullable: false
  description: Descripción del compromiso
- name: resultado_esperado
  type: Text
  nullable: true
  description: Entregable o resultado esperado
- name: tipo
  type: Enum[Tarea, Decision, Acuerdo, Instruccion, Seguimiento]
  default: Tarea
  description: Tipo de compromiso
- name: prioridad
  type: Enum[Urgente, Alta, Media, Baja]
  default: Media
  description: Prioridad asignada
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
  description: Responsable del cumplimiento
- name: corresponsables
  type: Array[String]
  nullable: true
  description: IDs de corresponsables si aplica
- name: supervisor_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Quien supervisa cumplimiento (usualmente AR)
- name: fecha_asignacion
  type: Date
  nullable: false
  description: Fecha de asignación
- name: fecha_limite
  type: Date
  nullable: false
  description: Fecha límite de cumplimiento
- name: fecha_cumplimiento
  type: Date
  nullable: true
  description: Fecha real de cumplimiento
- name: dias_atraso
  type: Integer
  computed: true
  formula: "CASE \n  WHEN fecha_cumplimiento IS NOT NULL \n  THEN GREATEST(0, DATEDIFF(fecha_cumplimiento,\
    \ fecha_limite))\n  WHEN CURRENT_DATE > fecha_limite \n  THEN DATEDIFF(CURRENT_DATE,\
    \ fecha_limite)\n  ELSE 0\nEND\n"
  description: Días de atraso si aplica
- name: estado
  type: Enum[Pendiente, EnProgreso, Cumplido, CumplidoParcial, NoCumplido, Cancelado,
    Prorrogado]
  default: Pendiente
  description: Estado del compromiso
- name: porcentaje_avance
  type: Integer
  default: 0
  description: Porcentaje de avance (0-100)
- name: evidencia_cumplimiento
  type: Text
  nullable: true
  description: Descripción de evidencia presentada
- name: url_evidencia
  type: String
  nullable: true
  description: URL a documento de evidencia
- name: verificador_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Quien verificó el cumplimiento
- name: fecha_verificacion
  type: Date
  nullable: true
  description: Fecha de verificación
- name: prorroga_solicitada
  type: Boolean
  default: false
  description: ¿Se solicitó prórroga?
- name: nueva_fecha_limite
  type: Date
  nullable: true
  description: Nueva fecha si hay prórroga
- name: motivo_prorroga
  type: Text
  nullable: true
  description: Justificación de la prórroga
- name: observaciones
  type: Text
  nullable: true
  description: Notas adicionales
- name: oportunidad_mejora_id
  type: String
  fk: ENT-GESTION-OPORTUNIDAD-MEJORA
  nullable: true
  description: Oportunidad de mejora generada si aplica
invariants:
- id: INV-CG-001
  name: cumplido_requiere_fecha
  rule: estado = 'Cumplido' → fecha_cumplimiento IS NOT NULL
  description: Compromiso cumplido debe tener fecha
  severity: error
- id: INV-CG-002
  name: cumplido_requiere_evidencia
  rule: estado = 'Cumplido' → evidencia_cumplimiento IS NOT NULL
  description: Cumplimiento requiere evidencia
  severity: warning
- id: INV-CG-003
  name: prorroga_requiere_fecha
  rule: prorroga_solicitada = TRUE → nueva_fecha_limite IS NOT NULL
  description: Prórroga requiere nueva fecha
  severity: error
- id: INV-CG-004
  name: verificacion_post_cumplimiento
  rule: verificador_id IS NOT NULL → fecha_cumplimiento IS NOT NULL
  description: Solo se verifica después de cumplir
id: ENT-GESTION-COMPROMISOGESTION
urn: urn:goreos:entity:d_gestion:ENT-GESTION-COMPROMISOGESTION:1.0.0
name: Compromisogestion
domain: D-GESTION
