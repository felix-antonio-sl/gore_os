# ==============================================================================
# GORE_OS Entity Atom: Lineamiento (Orientación Programática ERD)
# ==============================================================================
# Domain: D-PLAN (Strategic Planning)
# Subdomain: ERD
# Source: ERD Ñuble 2024-2030, domain_d-plan.md
# ==============================================================================

_metadata:
  version: "1.0.0"
  status: active
  created_at: "2025-12-21"
  created_by: "Arquitecto Categórico"
  domain: D-PLAN
  subdomain: erd
  kb_source:
    - "ERD Ñuble 2024-2030"
    - "domain_d-plan.md"

entity:
  id: ENT-PLAN-LINEAMIENTO
  name: Lineamiento
  name_es: Lineamiento Estratégico
  description: |
    Orientación programática dentro de un eje estratégico de la ERD.
    Cada eje tiene típicamente 2-4 lineamientos que agrupan
    objetivos estratégicos relacionados.

    Representa el segundo nivel de la jerarquía:
    ERD → Eje → **Lineamiento** → ObjetivoEstrategico

  purpose: |
    Modelar los lineamientos para:
    - Organizar objetivos por área temática específica
    - Facilitar la navegación de la ERD
    - Agrupar metas e indicadores

  categorical_type: Object
  is_abstract: false
  category: Master

  extends: null

  related_to:
    - entity: ENT-PLAN-EJE
      relation: pertenece_a
      cardinality: N:1
    - entity: ENT-PLAN-OE
      relation: compuesto_por
      cardinality: 1:N

attributes:
  - name: id_lineamiento
    type: String
    key: true
    description: Identificador único (ej. LIN-E1-01)

  - name: eje_id
    type: String
    fk: ENT-PLAN-EJE
    nullable: false
    description: Eje al que pertenece

  - name: codigo
    type: String
    nullable: false
    description: Código del lineamiento (ej. L1.1, L1.2)

  - name: nombre
    type: String
    nullable: false
    description: Nombre del lineamiento

  - name: descripcion
    type: Text
    nullable: true
    description: Descripción de la orientación

  - name: orden
    type: Integer
    default: 1
    description: Orden dentro del eje

  # Métricas
  - name: cantidad_objetivos
    type: Integer
    default: 0
    description: Número de OE en este lineamiento

  - name: cantidad_iprs
    type: Integer
    default: 0
    description: IPRs vinculadas a OEs de este lineamiento

  - name: porcentaje_avance
    type: Decimal
    nullable: true
    description: Promedio de avance de sus OEs

invariants:
  - id: INV-LIN-001
    name: codigo_unico_por_eje
    rule: UNIQUE(eje_id, codigo)
    description: Código único dentro del eje
    severity: error

morphisms:
  pertenece_a: [ENT-PLAN-EJE]
  compuesto_por: [ENT-PLAN-OE]

audit:
  fields_tracked:
    - porcentaje_avance
  retention_years: 15
