_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_pipeline
  type: String
  key: true
- name: nombre
  type: String
  nullable: false
  description: 'Ej: CI, CD-Staging, CD-Production'
- name: tipo
  type: Enum[CI, CD, Release, Hotfix]
  nullable: false
- name: trigger_type
  type: Enum[Push, PullRequest, Manual, Schedule]
  nullable: false
- name: commit_id
  type: String
  fk: ENT-DEV-COMMIT
  nullable: true
- name: pr_id
  type: String
  fk: ENT-DEV-PULLREQUEST
  nullable: true
- name: estado
  type: Enum[Pending, Running, Success, Failed, Cancelled]
  default: Pending
- name: fecha_inicio
  type: DateTime
  nullable: true
- name: fecha_fin
  type: DateTime
  nullable: true
- name: duracion_segundos
  type: Integer
  computed: true
  formula: fecha_fin - fecha_inicio
- name: ambiente_target
  type: String
  nullable: true
  description: Ambiente de despliegue (si CD)
invariants:
- id: INV-PIPELINE-001
  name: tiene_trigger
  rule: commit_id IS NOT NULL OR pr_id IS NOT NULL
  description: Pipeline debe ser disparado por commit o PR
- id: INV-PIPELINE-002
  name: success_before_deploy
  rule: tipo = 'CD' AND estado = 'Success' â†’ artefacto_id IS NOT NULL
  description: CD exitoso debe generar artefacto
