_meta:
  urn: urn:goreos:entity:d-ejec:problema-ipr:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
id: ENT-EJEC-PROBLEMA_IPR
urn: urn:goreos:entity:d-ejec:problema-ipr:1.0.0
name: Problema de IPR
domain: D-EJEC
category: Transaction
is_abstract: false
attributes:
- name: id_problema
  type: String
  key: true
- name: ipr_id
  type: String
  fk: ENT-FIN-IPR
  nullable: false
- name: convenio_id
  type: String
  fk: ENT-FIN-CONVENIO
  nullable: true
- name: tipo_problema
  type: Enum[Tecnico, Financiero, Legal, Administrativo, Ambiental, Social, Plazo,
    Calidad, Alcance, Otro]
  nullable: false
- name: categoria
  type: Enum[Menor, Moderado, Mayor, Critico]
  nullable: false
- name: titulo
  type: String
  nullable: false
- name: descripcion
  type: Text
  nullable: false
- name: causa_raiz
  type: Text
  nullable: true
- name: impacto
  type: Text
  nullable: true
- name: fecha_deteccion
  type: Date
  nullable: false
- name: fecha_limite_resolucion
  type: Date
  nullable: true
- name: fecha_resolucion
  type: Date
  nullable: true
- name: reportado_por_id
  type: String
  fk: ROL-FUNCIONARIO
  nullable: false
- name: asignado_a_id
  type: String
  fk: ROL-FUNCIONARIO
  nullable: true
- name: division_responsable
  type: String
  nullable: true
- name: solucion_propuesta
  type: Text
  nullable: true
- name: solucion_implementada
  type: Text
  nullable: true
- name: lecciones_aprendidas
  type: Text
  nullable: true
- name: estado
  type: Enum[Detectado, EnAnalisis, AsignadoPropuesto, EnResolucion, Resuelto, Escalado,
    Cerrado]
  default: Detectado
- name: escalado
  type: Boolean
  default: false
- name: nivel_escalamiento
  type: Enum[JefeDivision, AdministradorRegional, Gobernador, FENIX]
  nullable: true
- name: fenix_nivel
  type: Enum[Nivel_I, Nivel_II, Nivel_III]
  nullable: true
- name: compromiso_generado_id
  type: String
  nullable: true
  description: Compromiso de gestiÃ³n derivado del problema
invariants:
- name: critico_escala
  rule: IF categoria = Critico AND dias_sin_resolver > 7 THEN escalado = true
- name: resolucion_documentada
  rule: IF estado = Resuelto THEN solucion_implementada NOT NULL
