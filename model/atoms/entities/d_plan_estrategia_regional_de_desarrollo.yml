_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_erd
  type: String
  key: true
  description: Identificador único (ej. ERD-NUBLE-2024)
- name: nombre
  type: String
  nullable: false
  description: Nombre oficial de la ERD
- name: vision
  type: Text
  nullable: false
  description: Declaración de visión regional a 10 años
- name: periodo_inicio
  type: Integer
  nullable: false
  description: Año de inicio de vigencia
- name: periodo_fin
  type: Integer
  nullable: false
  description: Año de término de vigencia
- name: region_id
  type: String
  nullable: false
  description: Código de la región (16 para Ñuble)
- name: diagnostico_url
  type: String
  nullable: true
  description: URL del documento de diagnóstico
- name: documento_oficial_url
  type: String
  nullable: true
  description: URL del documento ERD aprobado
- name: acuerdo_core
  type: String
  nullable: true
  description: Número de acuerdo CORE aprobatorio
- name: fecha_aprobacion
  type: Date
  nullable: true
  description: Fecha de sesión CORE aprobatoria
- name: diario_oficial
  type: Date
  nullable: true
  description: Fecha de publicación en Diario Oficial
- name: estado
  type: Enum[EnElaboracion, EnConsultaPublica, Aprobada, Vigente, EnActualizacion,
    Reemplazada]
  default: EnElaboracion
  description: Estado del ciclo de vida
- name: cantidad_ejes
  type: Integer
  default: 0
  description: Número de ejes estratégicos
- name: cantidad_objetivos
  type: Integer
  default: 0
  description: Total de objetivos estratégicos
- name: porcentaje_cumplimiento
  type: Decimal
  nullable: true
  description: Avance global calculado de la ERD
- name: ods_priorizados
  type: Array[Integer]
  nullable: true
  description: ODS de la Agenda 2030 priorizados en esta ERD
invariants:
- id: INV-ERD-001
  name: periodo_valido
  rule: periodo_fin > periodo_inicio
  description: El período de vigencia debe ser coherente
  severity: error
- id: INV-ERD-002
  name: periodo_decenal
  rule: periodo_fin - periodo_inicio = 10
  description: La ERD tiene vigencia de 10 años
  severity: warning
- id: INV-ERD-003
  name: vigente_con_aprobacion
  rule: '(estado = ''Vigente'') → (acuerdo_core IS NOT NULL AND fecha_aprobacion IS
    NOT NULL)

    '
  description: Una ERD vigente requiere aprobación CORE
