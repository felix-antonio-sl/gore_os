_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_garantia
  type: String
  key: true
  description: Identificador interno
- name: convenio_id
  type: String
  fk: ENT-EJEC-CONVENIO
  nullable: false
  description: Convenio caucionado
- name: tipo_garantia
  type: Enum[FielCumplimiento, Anticipo, CorrectaEjecucion, SeriedadOferta]
  nullable: false
  description: Objeto de la garantía
- name: instrumento
  type: Enum[BoletaBancaria, PolizaSeguro, ValeVista, CertificadoFianza]
  nullable: false
  description: Tipo de instrumento
- name: entidad_emisora
  type: String
  nullable: false
  description: Banco o Aseguradora (ej. Banco Estado, HDI Seguros)
- name: numero_documento
  type: String
  nullable: false
  description: Número de serie del documento
- name: monto
  type: Decimal
  nullable: false
  description: Monto asegurado
- name: moneda
  type: Enum[CLP, UF, USD]
  default: CLP
  description: Moneda del documento
- name: fecha_emision
  type: Date
  nullable: false
  description: Fecha emisión
- name: fecha_vencimiento
  type: Date
  nullable: false
  description: Fecha expiración vigencia
- name: custodia_id
  type: String
  nullable: true
  description: Código de ubicación en caja fuerte/tesorería
- name: estado
  type: Enum[EnCustodia, PorVencer, Renovada, Devuelta, Ejecutada, Vencida]
  default: EnCustodia
  description: Estado actual del documento
- name: observaciones
  type: Text
  nullable: true
  description: Notas adicionales
invariants:
- id: INV-GAR-001
  name: cobertura_vigente
  rule: '(estado = ''EnCustodia'') → (fecha_vencimiento >= now())

    '
  description: Una garantía en custodia no debería estar vencida
  severity: error
- id: INV-GAR-002
  name: monto_positivo
  rule: monto > 0
  description: El monto debe ser positivo
  severity: error
