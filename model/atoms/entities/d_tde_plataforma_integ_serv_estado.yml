_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_servicio
  type: String
  key: true
- name: codigo
  type: String
  nullable: true
  description: Código PISEE
- name: nombre
  type: String
  nullable: false
- name: descripcion
  type: Text
  nullable: true
- name: tipo
  type: Enum[Publicado, Consumido]
  nullable: false
- name: categoria
  type: String
  nullable: true
  description: 'Categoría temática (ej: Personas, Empresas, Trámites)'
- name: institucion_proveedora
  type: String
  nullable: false
  description: Institución que provee el servicio
- name: rut_proveedor
  type: String
  nullable: true
- name: institucion_consumidora
  type: String
  nullable: true
  description: Si tipo=Consumido, quién consume
- name: endpoint
  type: String
  nullable: true
  description: URL del endpoint
- name: wsdl_swagger
  type: String
  nullable: true
  description: URL de WSDL o Swagger
- name: protocolo
  type: Enum[SOAP, REST, GraphQL]
  default: REST
- name: version_api
  type: String
  nullable: true
- name: formato_datos
  type: Enum[JSON, XML, CSV]
  default: JSON
- name: campos_datos
  type: Array[String]
  nullable: true
  description: Campos de datos intercambiados
- name: contiene_datos_personales
  type: Boolean
  default: false
- name: nivel_sensibilidad
  type: Enum[Publico, Interno, Reservado]
  default: Interno
- name: estado
  type: Enum[Desarrollo, Certificacion, Produccion, Suspendido, Deprecado]
  default: Desarrollo
- name: fecha_certificacion
  type: Date
  nullable: true
- name: fecha_produccion
  type: Date
  nullable: true
- name: acuerdo_id
  type: String
  fk: ENT-TDE-ACUERDO-INTERCAMBIO
  nullable: true
  description: Acuerdo de intercambio asociado
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
- name: sla_disponibilidad
  type: Decimal
  nullable: true
  description: 'SLA acordado (ej: 99.5%)'
- name: tiempo_respuesta_ms
  type: Integer
  nullable: true
  description: Tiempo de respuesta esperado
invariants:
- id: INV-PISEE-001
  name: produccion_requiere_endpoint
  rule: estado = 'Produccion' → endpoint IS NOT NULL
  description: Servicio en producción debe tener endpoint
- id: INV-PISEE-002
  name: datos_personales_requiere_acuerdo
  rule: contiene_datos_personales = TRUE → acuerdo_id IS NOT NULL
  description: Datos personales requieren acuerdo formal
