# Entidad: Licitacion (Licitación Pública)
# Domain: D-FIN
# Subdomain: compras
# Generated: 2025-12-21 (Phase 20.1 Deep Modeling)

id: ENT-FIN-LICITACION
urn: "urn:goreos:entity:d-fin:licitacion:1.0.0"
name: Licitación Pública
domain: D-FIN
subdomain: compras
category: Process-Entity
canonical_source:
  - "urn:knowledge:gorenuble:gn:manual-compras-contrataciones:1.0.0#MANUAL-COMPRAS-SEC-III-LP-01"
  - "Ley 19.886, Decreto 661/2024"

description: |
  Proceso competitivo para adquisición de bienes, servicios o ejecución de proyectos.
  Obligatoria para montos > 1.000 UTM (salvo Convenio Marco).

attributes:
  - name: id_licitacion
    type: String
    key: true
    description: ID generado por Mercado Público

  - name: nombre_licitacion
    type: String
    nullable: false

  - name: tipo_licitacion
    type: Enum[Normal, Abreviada, Grande]
    nullable: false

  - name: rango_monto
    type: Enum[Menos3UTM, 3a100UTM, 100a1000UTM, Mas1000UTM, Mas5000UTM]
    nullable: false

  - name: fecha_publicacion
    type: Date
    nullable: false

  - name: fecha_cierre_ofertas
    type: DateTime
    nullable: false

  - name: plazo_minimo_dias
    type: Integer
    computed: true
    description: 20 (normal), 10 (abreviada), 30 (grande)

  # Bases
  - name: bases_administrativas_url
    type: String
    nullable: false

  - name: bases_tecnicas_url
    type: String
    nullable: false

  # Evaluación
  - name: criterios_evaluacion
    type: YAML
    description: Ponderaciones técnico, económico, plazo, etc.

  - name: comision_evaluadora
    type: List[String]
    description: IDs de funcionarios designados (mín. 3)

  - name: resolucion_comision
    type: String
    nullable: true

  # Adjudicación
  - name: fecha_adjudicacion
    type: Date
    nullable: true

  - name: proveedor_adjudicado_id
    type: String
    fk: ENT-FIN-PROVEEDOR
    nullable: true

  - name: monto_adjudicado
    type: Decimal
    nullable: true

  - name: resolucion_adjudicacion
    type: String
    nullable: true
    description: Resolución Exenta del Gobernador

  - name: estado
    type: Enum[Borrador, Publicada, EnEvaluacion, Adjudicada, Desierta, Revocada]
    default: Borrador

  # Garantía de Seriedad (> 5.000 UTM)
  - name: requiere_garantia_seriedad
    type: Boolean
    computed: true
    formula: rango_monto = Mas5000UTM

  - name: garantia_seriedad_id
    type: String
    fk: ENT-FIN-GARANTIA
    nullable: true

invariants:
  - name: plazos_publicacion
    rule: |
      IF tipo_licitacion = Normal THEN plazo >= 20
      IF tipo_licitacion = Abreviada THEN plazo >= 10
      IF tipo_licitacion = Grande THEN plazo >= 30
    source: "MANUAL-COMPRAS-SEC-III-LP-01"

  - name: comision_minima
    rule: "LENGTH(comision_evaluadora) >= 3"
    source: "MANUAL-COMPRAS-SEC-III-LP-01"

morphisms:
  requiere: [ENT-FIN-CDP]
  genera: [ENT-FIN-ORDEN_COMPRA, ENT-FIN-CONTRATO]
  publicado_en: [MercadoPublico]
  visado_por: [ROL-ABOGADO-JURIDICA] # Para > 5.000 UTM
