_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_comunicacion
  type: String
  key: true
- name: tipo
  type: Enum[Oficio, Resolucion, Convenio, Providencia, Memorandum, Otro]
  nullable: false
- name: numero
  type: String
  nullable: true
  description: 'Número de documento (ej: OF. ORD. 123)'
- name: materia
  type: String
  nullable: false
  description: Asunto de la comunicación
- name: contenido
  type: Text
  nullable: true
- name: adjuntos_count
  type: Integer
  default: 0
- name: fecha_emision
  type: Date
  nullable: false
- name: fecha_envio
  type: Timestamp
  nullable: true
- name: fecha_recepcion
  type: Timestamp
  nullable: true
- name: emisor_oficina_id
  type: String
  fk: ENT-TDE-OFICINA-PARTE
  nullable: false
- name: receptor_oficina_id
  type: String
  fk: ENT-TDE-OFICINA-PARTE
  nullable: false
- name: funcionario_emisor_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Funcionario que envía
- name: estado
  type: Enum[Borrador, Enviado, Recibido, Leido, Archivado, Rechazado]
  default: Borrador
- name: expediente_id
  type: String
  fk: ENT-TDE-EXPEDIENTE-ELECTRONICO
  nullable: true
  description: Si forma parte de un expediente
invariants:
- id: INV-COM-001
  name: envio_requiere_numero
  rule: estado != 'Borrador' → numero IS NOT NULL
  description: Comunicaciones enviadas deben tener número
- id: INV-COM-002
  name: recepcion_despues_envio
  rule: fecha_recepcion IS NULL OR fecha_recepcion >= fecha_envio
  description: No puede recibirse antes de enviarse
