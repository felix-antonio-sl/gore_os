_meta:
  urn: urn:goreos:entity:d_norm:ENT-NORM-FIRMAACTO:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_firma
  type: String
  key: true
  description: Identificador único
- name: acto_id
  type: String
  fk: ENT-NORM-ACTO
  nullable: false
  description: Acto firmado
- name: firmante_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
  description: Funcionario firmante
- name: tipo_firma
  type: Enum[FEA, FES, Manual]
  nullable: false
  description: FEA=Avanzada, FES=Simple
- name: fecha_firma
  type: DateTime
  nullable: false
  description: Fecha y hora de firma
- name: rol_firmante
  type: Enum[Autoridad, Visador, MinistroFe]
  nullable: false
  description: Rol del firmante
- name: orden
  type: Integer
  default: 1
  description: Orden en cadena de firmas
- name: url_verificacion
  type: String
  nullable: true
  description: URL para verificar firma
- name: hash_documento
  type: String
  nullable: true
  description: Hash del documento firmado
- name: estado
  type: Enum[Pendiente, Firmado, Rechazado, Anulado]
  default: Pendiente
  description: Estado de la firma
invariants:
- id: INV-FIRMA-001
  name: fea_requiere_url
  rule: 'tipo_firma = ''FEA'' AND estado = ''Firmado'' → url_verificacion IS NOT NULL

    '
  description: FEA firmada requiere URL de verificación
  severity: warning
id: ENT-NORM-FIRMAACTO
urn: urn:goreos:entity:d_norm:ENT-NORM-FIRMAACTO:1.0.0
name: Firmaacto
domain: D-NORM
