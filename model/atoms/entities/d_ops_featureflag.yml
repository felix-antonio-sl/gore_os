_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_flag
  type: String
  key: true
- name: nombre
  type: String
  nullable: false
  description: Nombre único del flag
- name: descripcion
  type: String
  nullable: true
- name: estado
  type: Enum[Activo, Inactivo, Rollout]
  default: Inactivo
- name: porcentaje_rollout
  type: Integer
  default: 0
  description: Porcentaje de usuarios que ven la feature (0-100)
- name: ambiente
  type: Enum[Development, Staging, Production, All]
  nullable: false
- name: segmentacion
  type: Json
  nullable: true
  description: Reglas de segmentación (roles, usuarios, etc.)
- name: fecha_activacion
  type: DateTime
  nullable: true
- name: fecha_desactivacion
  type: DateTime
  nullable: true
- name: propietario_id
  type: String
  fk: ENT-OPS-USUARIO-SISTEMA
  nullable: true
- name: story_id
  type: String
  fk: ENT-DEV-STORY
  nullable: true
  description: Story que implementa la feature
invariants:
- id: INV-FF-001
  name: rollout_tiene_porcentaje
  rule: estado = 'Rollout' → porcentaje_rollout > 0 AND porcentaje_rollout < 100
  description: Rollout debe tener porcentaje parcial
- id: INV-FF-002
  name: activo_es_100
  rule: estado = 'Activo' → porcentaje_rollout = 100
  description: Activo significa 100% rollout
