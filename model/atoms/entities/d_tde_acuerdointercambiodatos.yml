_meta:
  urn: urn:goreos:entity:d_tde:ENT-TDE-ACUERDOINTERCAMBIODATOS:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_acuerdo
  type: String
  key: true
- name: codigo
  type: String
  nullable: true
  description: Código del convenio
- name: nombre
  type: String
  nullable: false
- name: institucion_origen
  type: String
  nullable: false
  description: Institución que provee datos
- name: rut_origen
  type: String
  nullable: true
- name: institucion_destino
  type: String
  nullable: false
  description: Institución que recibe datos
- name: rut_destino
  type: String
  nullable: true
- name: contacto_origen
  type: String
  nullable: true
- name: contacto_destino
  type: String
  nullable: true
- name: base_legal
  type: Text
  nullable: false
  description: Normativa que autoriza el intercambio
- name: finalidad
  type: Text
  nullable: false
  description: Finalidad del intercambio de datos
- name: datos_intercambiados
  type: JSON
  nullable: true
  description: "Descripción de datos:\n[{\n  \"campo\": \"...\",\n  \"tipo_dato\"\
    : \"...\",\n  \"sensibilidad\": \"...\"\n}]\n"
- name: contiene_datos_personales
  type: Boolean
  default: false
- name: contiene_datos_sensibles
  type: Boolean
  default: false
- name: medidas_seguridad
  type: Text
  nullable: true
  description: Medidas de seguridad aplicables
- name: cifrado_requerido
  type: Boolean
  default: true
- name: fecha_inicio
  type: Date
  nullable: false
- name: fecha_termino
  type: Date
  nullable: true
- name: renovacion_automatica
  type: Boolean
  default: false
- name: vigente
  type: Boolean
  computed: true
  formula: fecha_termino IS NULL OR fecha_termino >= TODAY()
- name: estado
  type: Enum[Borrador, EnRevision, Firmado, Vigente, Vencido, Terminado]
  default: Borrador
- name: acto_administrativo_id
  type: String
  fk: ENT-NORM-ACTO
  nullable: true
  description: Resolución que aprueba el convenio
- name: responsable_gore_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
invariants:
- id: INV-AID-001
  name: vigente_requiere_firma
  rule: estado = 'Vigente' → acto_administrativo_id IS NOT NULL
  description: Acuerdo vigente debe tener acto aprobatorio
- id: INV-AID-002
  name: personales_requiere_finalidad
  rule: contiene_datos_personales = TRUE → finalidad IS NOT NULL
  description: Datos personales requieren finalidad explícita
id: ENT-TDE-ACUERDOINTERCAMBIODATOS
urn: urn:goreos:entity:d_tde:ENT-TDE-ACUERDOINTERCAMBIODATOS:1.0.0
name: Acuerdointercambiodatos
domain: D-TDE
