_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_postulacion
  type: String
  key: true
  description: Identificador único de la postulación
- name: convocatoria_id
  type: String
  fk: ENT-FIN-CONV-SUBV8
  nullable: false
  description: Convocatoria a la que postula
- name: organizacion_postulante_id
  type: String
  fk: ENT-ORG-ORGANIZACION
  nullable: false
  description: Organización que presenta la iniciativa
- name: tipo_organizacion
  type: Enum[PRIV_SFL, ORG_COMUNITARIA, ORG_ADULTO_MAYOR, MUNICIPALIDAD]
  nullable: false
  description: Tipo de organización postulante
- name: nombre_iniciativa
  type: String
  nullable: false
  description: Nombre del proyecto o iniciativa
- name: area_postulacion
  type: String
  nullable: false
  description: Área temática a la que postula dentro del fondo
- name: monto_solicitado
  type: Decimal
  nullable: false
  description: Monto de financiamiento solicitado
- name: fecha_ingreso
  type: DateTime
  nullable: false
  description: Timestamp de ingreso de la postulación
- name: estado
  type: Enum[Ingresada, EnRevisionAdmisibilidad, Admisible, AdmisibleConObservaciones,
    Inadmisible, EnEvaluacionTecnica, Recomendada, NoRecomendada, ListaEspera, Adjudicada,
    Rechazada, Renunciada]
  default: Ingresada
  description: Estado actual de la postulación
- name: antiguedad_organizacion_anios
  type: Integer
  nullable: false
  description: Años desde constitución (mínimo 2 requerido)
- name: domicilio_region_nuble
  type: Boolean
  nullable: false
  description: Si tiene domicilio en la Región de Ñuble
- name: experiencia_area
  type: Boolean
  nullable: false
  description: Si demuestra experiencia en el área de postulación
- name: tiene_rendiciones_pendientes
  type: Boolean
  default: false
  description: Si tiene rendiciones pendientes con GORE
- name: carta_solicitud_recursos
  type: Boolean
  default: false
  description: Carta dirigida al Gobernador Regional
- name: carta_aceptacion_terminos
  type: Boolean
  default: false
  description: Aceptación de términos y condiciones
- name: rut_organizacion_adjunto
  type: Boolean
  default: false
  description: Fotocopia RUT organización
- name: cedula_representante_adjunta
  type: Boolean
  default: false
  description: Cédula identidad representante legal
- name: certificado_directorio_vigente
  type: Boolean
  default: false
  description: Certificado directorio (max 30 días)
- name: inscripcion_registro_19862
  type: Boolean
  default: false
  description: Inscripción Registro Colaboradores Estado
- name: cuenta_bancaria_adjunta
  type: Boolean
  default: false
  description: Libreta ahorro o certificado bancario
- name: cotizaciones_adjuntas
  type: Boolean
  default: false
  description: Cotizaciones por ítem (equipamiento, gestión, difusión)
- name: formulario_postulacion_completo
  type: Boolean
  default: false
  description: Formulario de presentación completo
- name: planilla_presupuesto_adjunta
  type: Boolean
  default: false
  description: Planilla de presupuesto
- name: documentos_adicionales
  type: Array[String]
  nullable: true
  description: Documentos adicionales según fondo (ej. carta apoyo uso espacio)
- name: fecha_revision_admisibilidad
  type: Date
  nullable: true
  description: Fecha de revisión de admisibilidad
- name: observaciones_admisibilidad
  type: String
  nullable: true
  description: Observaciones del proceso de admisibilidad
- name: plazo_subsanacion
  type: Date
  nullable: true
  description: Fecha límite para subsanar observaciones
- name: subsanacion_presentada
  type: Boolean
  nullable: true
  description: Si presentó subsanación
- name: puntaje_tecnico
  type: Decimal
  nullable: true
  description: Puntaje técnico (escala 1-7)
- name: fecha_evaluacion_tecnica
  type: Date
  nullable: true
  description: Fecha de evaluación técnica
- name: evaluador_id
  type: String
  nullable: true
  description: ID del evaluador asignado
- name: observaciones_evaluacion
  type: String
  nullable: true
  description: Observaciones técnicas del evaluador
- name: monto_adjudicado
  type: Decimal
  nullable: true
  description: Monto finalmente adjudicado (puede diferir del solicitado)
- name: fecha_adjudicacion
  type: Date
  nullable: true
  description: Fecha de adjudicación
- name: es_excepcion_doble_postulacion
  type: Boolean
  default: false
  description: 'Si es segunda postulación bajo excepción:

    - Organismos Mejor Niñez (área Residencias)

    - Instituciones deporte/cultura con representación

    '
- name: convenio_id
  type: String
  fk: ENT-FIN-CONVENIO
  nullable: true
  description: Convenio generado si fue adjudicada
- name: nombre_formulador
  type: String
  nullable: false
  description: Nombre del formulador de la iniciativa
- name: email_formulador
  type: String
  nullable: false
  description: Correo electrónico del formulador
- name: vinculo_formulador
  type: String
  nullable: true
  description: Relación del formulador con la organización
invariants:
- id: INV-POST8-001
  name: una_postulacion_por_organizacion
  rule: "COUNT(PostulacionSubvencion8 WHERE \n      organizacion_postulante_id = THIS.organizacion_postulante_id\
    \ \n      AND convocatoria_id.anio_presupuestario = THIS.convocatoria_id.anio_presupuestario\n\
    \      AND es_excepcion_doble_postulacion = false) <= 1\n"
  description: Organizaciones pueden postular solo a una iniciativa por año
  exception: Mejor Niñez (Residencias) e instituciones con representación pueden más
  source: kb_gn_028 Sec. 1 Regla General
- id: INV-POST8-002
  name: antiguedad_minima_2_anios
  rule: antiguedad_organizacion_anios >= 2
  description: La organización debe tener mínimo 2 años de antigüedad
  source: kb_gn_028 Requisitos Postulantes
  severity: error
- id: INV-POST8-003
  name: domicilio_en_nuble
  rule: domicilio_region_nuble = true
  description: La organización debe tener domicilio en Región de Ñuble
  source: kb_gn_028 Requisitos Postulantes
  severity: error
- id: INV-POST8-004
  name: sin_rendiciones_pendientes
  rule: tiene_rendiciones_pendientes = false
  description: No puede tener rendiciones pendientes con GORE
  source: kb_gn_028 Requisitos Postulantes
  severity: error
- id: INV-POST8-005
  name: monto_no_excede_tope_area
  rule: "monto_solicitado <= \nconvocatoria_id.monto_tope_por_area[area_postulacion\
    \ + '::' + tipo_organizacion]\n"
  description: El monto solicitado no puede exceder el tope del área
  source: kb_gn_028 Montos Tope
  severity: error
- id: INV-POST8-006
  name: puntaje_minimo_recomendacion
  rule: '(estado = ''Recomendada'') → puntaje_tecnico >= 5.0

    '
  description: Se requiere puntaje mínimo 5.0 para ser recomendada
  source: kb_gn_028 Sec. 2 Evaluación
- id: INV-POST8-007
  name: montos_coinciden
  rule: "monto_solicitado = \ncarta_solicitud.monto = \nplanilla_presupuesto.total\n"
  description: El monto debe coincidir en formulario, carta y planilla
  source: kb_gn_028 Sec. 1 Documentos
  severity: error
- id: INV-POST8-008
  name: adjudicacion_requiere_admisible
  rule: "(estado = 'Adjudicada') → \n(estado_previo IN ['Admisible', 'Recomendada'])\n"
  description: Solo se puede adjudicar si es admisible y recomendada
- id: INV-POST8-009
  name: adulto_mayor_exclusivo
  rule: "(convocatoria_id.fondo_id = 'ADULTO_MAYOR') → \ntipo_organizacion = 'ORG_ADULTO_MAYOR'\n"
  description: Fondo Adulto Mayor solo para organizaciones de AM
  source: kb_gn_028 Sec. 7
- id: INV-POST8-010
  name: ingreso_antes_cierre
  rule: fecha_ingreso <= convocatoria_id.fecha_cierre
  description: Postulación debe ingresar antes del cierre
  severity: error
