_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_consentimiento
  type: String
  key: true
  description: UUID único
- name: titular_rut
  type: String
  nullable: false
  description: RUT del titular de los datos
- name: responsable_id
  type: String
  fk: ENT-TDE-RESPONSABLE-TRATAMIENTO
  nullable: false
  description: Responsable que recibe el consentimiento
- name: fecha_otorgamiento
  type: Timestamp
  nullable: false
- name: medio_otorgamiento
  type: Enum[Escrito, Verbal, Electronico, AccionAfirmativa]
  nullable: false
  description: Forma en que se manifestó la voluntad
- name: finalidades
  type: Array[String]
  nullable: false
  description: Fines específicos autorizados
- name: datos_autorizados
  type: Array[String]
  nullable: true
  description: Categorías de datos autorizados (si se especifican)
- name: fecha_revocacion
  type: Timestamp
  nullable: true
- name: medio_revocacion
  type: Enum[Escrito, Verbal, Electronico]
  nullable: true
- name: motivo_revocacion
  type: String
  nullable: true
  description: Sin obligación de expresar causa (Art. 12)
- name: vigente
  type: Boolean
  computed: true
  formula: fecha_revocacion IS NULL
  description: 'Calculado: True si no ha sido revocado'
- name: evidencia_url
  type: String
  nullable: true
  description: Link a documento/registro que respalda el consentimiento
invariants:
- id: INV-CONSENT-001
  name: revocacion_no_retroactiva
  rule: fecha_revocacion IS NULL OR fecha_revocacion >= fecha_otorgamiento
  description: La revocación no puede ser anterior al otorgamiento
- id: INV-CONSENT-002
  name: finalidad_especifica
  rule: LENGTH(finalidades) > 0
  description: Debe existir al menos una finalidad específica
