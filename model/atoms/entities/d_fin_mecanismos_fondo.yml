_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_fondo
  type: String
  key: true
- name: codigo_fondo
  type: Enum[FNDR, FRIL, FRPD, PCT8, EMERGENCIA, ASOCIATIVIDAD]
  nullable: false
  description: 'FNDR: Fondo Nacional de Desarrollo Regional

    FRIL: Fondo Regional de Iniciativa Local

    FRPD: Fondo Regional para la Productividad y el Desarrollo (Royalty)

    PCT8: 8% Vinculación con la Comunidad

    EMERGENCIA: 3% para emergencias (Glosa 14)

    ASOCIATIVIDAD: Programa Asociatividad y Planes Especiales

    '
- name: nombre
  type: String
  nullable: false
- name: descripcion
  type: Text
  nullable: true
- name: subtitulo_principal
  type: String
  nullable: false
  description: 31, 33, 24 según naturaleza del fondo
- name: item
  type: String
  nullable: true
- name: asignacion
  type: String
  nullable: true
  description: 'Ej: 33.03 para FRPD'
- name: glosa_habilitante
  type: String
  nullable: true
  description: 'Ej: Glosa 07, Glosa 12'
- name: ejercicio
  type: Integer
  nullable: false
- name: presupuesto_inicial
  type: Decimal
  nullable: false
  description: Presupuesto aprobado en Ley
- name: presupuesto_vigente
  type: Decimal
  nullable: false
  description: Presupuesto después de modificaciones
- name: comprometido_acumulado
  type: Decimal
  default: 0
- name: devengado_acumulado
  type: Decimal
  default: 0
- name: pagado_acumulado
  type: Decimal
  default: 0
- name: saldo_disponible
  type: Decimal
  computed: true
  formula: presupuesto_vigente - comprometido_acumulado
- name: tipos_ejecutor_permitidos
  type: Array[Enum[GORE, Municipio, Servicio, Universidad, ONG, Privado, OSFL]]
  nullable: false
  description: Tipos de ejecutor habilitados para este fondo
- name: requiere_evaluacion_mdsf
  type: Boolean
  default: true
  description: Si las IPR del fondo requieren evaluación MDSF
- name: requiere_concurso
  type: Boolean
  default: true
  description: Si la asignación es por concurso
- name: permite_asignacion_directa
  type: Boolean
  default: false
- name: porcentaje_asignacion_directa_max
  type: Decimal
  nullable: true
  description: 10% para 8% FNDR según Glosa 07
- name: monto_asignacion_directa_acumulado
  type: Decimal
  default: 0
- name: tope_costo_utm
  type: Decimal
  nullable: true
  description: 5.000 UTM para FRIL
- name: porcentaje_minimo_cultura
  type: Decimal
  nullable: true
  description: 1% mínimo a cultura para 8%
- name: porcentaje_administracion_gore
  type: Decimal
  default: 0.05
  description: 5% para gastos de administración Glosa 06
- name: es_fondo_8_pct
  type: Boolean
  default: false
  description: Si corresponde al 8% de Vinculación Comunidad
- name: areas_tematicas
  type: Array[String]
  nullable: true
  description: Áreas habilitadas para postulación (ej. Cultura, Deporte)
- name: requiere_gratuidad
  type: Boolean
  default: true
  description: Si las actividades financiadas deben ser gratuitas
- name: plazo_ejecucion_meses
  type: Integer
  nullable: true
  description: Plazo máximo típico de ejecución (ej. 8 meses para 8%)
- name: limite_gastos_admin_pct
  type: Decimal
  default: 0.05
  description: Límite porcentual para gastos administrativos de la org
- name: permite_cotizacion_internet
  type: Boolean
  default: false
  description: Si acepta pantallazos de internet como cotización válida
- name: estado
  type: Enum[Activo, Agotado, Cerrado]
  default: Activo
- name: fecha_cierre_ejercicio
  type: Date
  nullable: true
invariants:
- id: INV-FONDO-001
  name: fril_solo_municipios
  rule: "(codigo_fondo = FRIL) → \ntipos_ejecutor_permitidos = [Municipio]\n"
  description: FRIL es exclusivo para municipalidades
- id: INV-FONDO-002
  name: asignacion_directa_limite
  rule: "monto_asignacion_directa_acumulado <= \n(porcentaje_asignacion_directa_max\
    \ * presupuesto_vigente)\n"
  description: Asignaciones directas no superan límite porcentual
- id: INV-FONDO-003
  name: saldo_no_negativo
  rule: saldo_disponible >= 0
  description: No puede comprometerse más de lo disponible
- id: INV-FONDO-004
  name: cultura_minimo_8pct
  rule: "(codigo_fondo = PCT8) → \nSUM(IPR.monto WHERE sector = Cultura) >= 0.01 *\
    \ presupuesto_vigente\n"
  description: 8% debe destinar mínimo 1% a cultura y patrimonio
- id: INV-FONDO-005
  name: emergencia_3pct_limite
  rule: "(codigo_fondo = EMERGENCIA) → \npresupuesto_vigente <= 0.03 * total_inversion_regional\n"
  description: Emergencias limitadas al 3% del presupuesto de inversión
