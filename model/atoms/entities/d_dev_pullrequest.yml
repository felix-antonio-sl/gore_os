_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_pr
  type: String
  key: true
  description: ID global o compuesto (REPO-NUM)
- name: numero
  type: Integer
  nullable: false
  description: Número correlativo en el repo
- name: titulo
  type: String
  nullable: false
- name: descripcion
  type: Text
  nullable: true
- name: repositorio_id
  type: String
  fk: ENT-DEV-REPOSITORIO
  nullable: false
- name: rama_origen
  type: String
  nullable: false
- name: rama_destino
  type: String
  nullable: false
- name: autor_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
- name: revisores_ids
  type: Array[String]
  nullable: true
- name: historias_vinculadas
  type: Array[String]
  nullable: true
  description: IDs de historias que resuelve este PR
- name: estado_ci
  type: Enum[Pendiente, Exitoso, Fallido, Saltado]
  default: Pendiente
- name: estado
  type: Enum[Abierto, Merged, Cerrado, Draft]
  default: Abierto
- name: fecha_creacion
  type: Timestamp
  nullable: false
- name: fecha_cierre
  type: Timestamp
  nullable: true
invariants:
- id: INV-PR-001
  name: merge_requiere_ci_exitoso
  rule: estado = 'Merged' → estado_ci = 'Exitoso'
  description: No mercar si CI falló (soft rule para hotfix)
  severity: warning
