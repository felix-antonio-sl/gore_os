_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_recurso
  type: String
  key: true
  description: Identificador único
- name: intervencion_id
  type: String
  fk: ENT-FENIX-INTERVENCION
  nullable: false
  description: Intervención que requiere el recurso
- name: tipo_recurso
  type: Enum[Financiero, Humano, Material, Tecnologico, Servicios, Otro]
  nullable: false
  description: Tipo de recurso
- name: descripcion
  type: Text
  nullable: false
  description: Descripción del recurso requerido
- name: cantidad
  type: Decimal
  nullable: true
  description: Cantidad (unidades, horas, etc.)
- name: unidad
  type: String
  nullable: true
  description: Unidad de medida (horas, unidades, $)
- name: costo_estimado
  type: Decimal
  nullable: true
  description: Costo estimado en CLP
- name: costo_real
  type: Decimal
  nullable: true
  description: Costo real incurrido
- name: origen_recurso
  type: Enum[PresupuestoRegular, Reasignacion, FondoEmergencia, Donacion, Prestamo,
    Otro]
  nullable: false
- name: item_presupuestario_id
  type: String
  fk: ENT-FIN-ITEM-PRESUPUESTARIO
  nullable: true
  description: Ítem presupuestario origen (D-FIN)
- name: activo_id
  type: String
  nullable: true
  description: ID de activo si es material (D-BACK)
- name: dominio_proveedor
  type: Enum[D-FIN, D-BACK, D-TDE, D-EJEC, Externo]
  nullable: true
  description: Dominio que provee el recurso
- name: estado_solicitud
  type: Enum[Solicitado, Aprobado, Rechazado, EnProvision, Provisto, Liberado]
  default: Solicitado
  description: Estado de la solicitud
- name: fecha_solicitud
  type: Date
  nullable: false
- name: fecha_provision
  type: Date
  nullable: true
  description: Fecha de entrega/provisión
- name: fecha_liberacion
  type: Date
  nullable: true
  description: Fecha de devolución si aplica
- name: solicitante_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
- name: aprobador_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
- name: urgencia
  type: Enum[Inmediata, Alta, Media, Baja]
  default: Alta
- name: critico_para_intervencion
  type: Boolean
  default: false
  description: ¿La intervención depende de este recurso?
- name: observaciones
  type: Text
  nullable: true
invariants:
- id: INV-REC-001
  name: provisto_requiere_aprobacion
  rule: estado_solicitud = 'Provisto' → aprobador_id IS NOT NULL
  description: Provisión requiere aprobación previa
- id: INV-REC-002
  name: financiero_requiere_item
  rule: tipo_recurso = 'Financiero' → item_presupuestario_id IS NOT NULL
  description: Recurso financiero debe tener ítem presupuestario
  severity: warning
