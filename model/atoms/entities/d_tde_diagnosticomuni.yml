_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_diagnostico
  type: String
  key: true
- name: entidad_id
  type: String
  fk: ENT-TDE-ENTIDAD-REGIONAL
  nullable: false
  description: Entidad diagnosticada
- name: fecha
  type: Date
  nullable: false
  description: Fecha del diagnóstico
- name: periodo
  type: String
  nullable: true
  description: 'Período (ej: 2025-S1)'
- name: evaluador_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Funcionario GORE que evaluó
- name: metodologia
  type: Enum[CPAT, Autodiagnostico, VisitaTerreno, Mixto]
  default: CPAT
- name: puntaje_gobierno_digital
  type: Decimal
  nullable: false
- name: puntaje_servicios_digitales
  type: Decimal
  nullable: false
- name: puntaje_interoperabilidad
  type: Decimal
  nullable: false
- name: puntaje_ciberseguridad
  type: Decimal
  nullable: false
- name: puntaje_capacidades
  type: Decimal
  nullable: false
- name: puntaje_global
  type: Decimal
  computed: true
  formula: (puntaje_gobierno_digital + puntaje_servicios_digitales + puntaje_interoperabilidad
    + puntaje_ciberseguridad + puntaje_capacidades) / 5
- name: brechas
  type: JSON
  nullable: true
  description: "Lista de brechas:\n[{\n  \"dimension\": \"...\",\n  \"brecha\": \"\
    ...\",\n  \"prioridad\": \"Alta|Media|Baja\",\n  \"accion_sugerida\": \"...\"\n\
    }]\n"
- name: fortalezas
  type: Array[String]
  nullable: true
- name: plan_accion_id
  type: String
  nullable: true
  description: ID del plan de mejora generado
- name: fecha_proximo_diagnostico
  type: Date
  nullable: true
- name: estado
  type: Enum[EnCurso, Completado, Pendiente]
  default: EnCurso
invariants:
- id: INV-DIAG-001
  name: puntajes_rango_valido
  rule: 'puntaje_gobierno_digital BETWEEN 1 AND 5 AND

    puntaje_servicios_digitales BETWEEN 1 AND 5 AND

    puntaje_interoperabilidad BETWEEN 1 AND 5 AND

    puntaje_ciberseguridad BETWEEN 1 AND 5 AND

    puntaje_capacidades BETWEEN 1 AND 5

    '
  description: Puntajes deben estar en rango 1-5
