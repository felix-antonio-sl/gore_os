_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_solicitud
  type: String
  key: true
  description: Identificador único
- name: convenio_id
  type: String
  fk: ENT-EJEC-CONVENIO
  nullable: false
  description: Convenio a modificar
- name: tipo_modificacion
  type: Enum[AumentoCosto, DisminucionCosto, Prorroga, CambioAlcance, CambioEjecutor,
    Mixto]
  nullable: false
  description: Tipo de cambio solicitado
- name: descripcion
  type: Text
  nullable: false
  description: Descripción detallada del cambio
- name: justificacion
  type: Text
  nullable: false
  description: Justificación técnica/operativa
- name: fecha_solicitud
  type: Date
  nullable: false
  description: Fecha de ingreso de la solicitud
- name: solicitante
  type: String
  nullable: false
  description: Unidad Técnica o Ejecutor que solicita
- name: monto_original_convenio
  type: Decimal
  nullable: false
  description: Monto vigente del convenio
- name: monto_solicitado_adicional
  type: Decimal
  default: 0
  description: Monto adicional solicitado (puede ser negativo)
- name: porcentaje_variacion
  type: Decimal
  computed: true
  formula: (monto_solicitado_adicional / monto_original_convenio) * 100
  description: Porcentaje de variación
- name: dias_prorroga_solicitados
  type: Integer
  default: 0
  description: Días adicionales solicitados
- name: analista_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Analista GORE asignado
- name: informe_tecnico
  type: Text
  nullable: true
  description: Análisis del supervisor GORE
- name: altera_objetivo_ipr
  type: Boolean
  default: false
  description: ¿Altera el objetivo original de la IPR?
- name: requiere_core
  type: Boolean
  computed: true
  formula: '(monto_solicitado_adicional > 7000 UTM) OR

    (porcentaje_variacion > 10) OR

    (altera_objetivo_ipr = true)

    '
  description: ¿Requiere nuevo acuerdo CORE?
- name: requiere_reevaluacion_mdsf
  type: Boolean
  computed: true
  formula: requiere_core
  description: ¿Requiere reevaluación técnico-económica SNI?
- name: estado
  type: Enum[Ingresada, EnAnalisis, Aprobada, Rechazada, PendienteCORE]
  default: Ingresada
  description: Estado de la solicitud
- name: modificacion_convenio_id
  type: String
  fk: ENT-EJEC-MODCONV
  nullable: true
  description: Modificación resultante (si aprobada)
invariants:
- id: INV-SOLMOD-001
  name: rechazar_si_altera_objetivo
  rule: '(altera_objetivo_ipr = true) → (estado != ''Aprobada'' OR requiere_core =
    true)

    '
  description: Cambios que alteran objetivo requieren tratamiento especial
  severity: warning
