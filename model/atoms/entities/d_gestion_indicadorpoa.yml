_meta:
  urn: urn:goreos:entity:d_gestion:ENT-GESTION-INDICADORPOA:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_indicador
  type: String
  key: true
  description: Identificador único
- name: poa_id
  type: String
  fk: ENT-GESTION-POA
  nullable: false
  description: POA al que pertenece
- name: codigo
  type: String
  nullable: false
  description: 'Código corto (ej: IND-DAF-001)'
- name: nombre
  type: String
  nullable: false
  description: Nombre descriptivo del indicador
- name: descripcion
  type: Text
  nullable: true
  description: Descripción detallada
- name: tipo
  type: Enum[Eficacia, Eficiencia, Calidad, Impacto]
  nullable: false
  description: Clasificación del indicador
- name: formula
  type: Text
  nullable: false
  description: Fórmula de cálculo
- name: unidad_medida
  type: String
  nullable: false
  description: Unidad (%, días, M$, etc.)
- name: linea_base
  type: Decimal
  nullable: true
  description: Valor inicial de referencia
- name: meta_anual
  type: Decimal
  nullable: false
  description: Meta para el período fiscal
- name: meta_t1
  type: Decimal
  nullable: true
  description: Meta Trimestre 1
- name: meta_t2
  type: Decimal
  nullable: true
  description: Meta Trimestre 2
- name: meta_t3
  type: Decimal
  nullable: true
  description: Meta Trimestre 3
- name: meta_t4
  type: Decimal
  nullable: true
  description: Meta Trimestre 4
- name: valor_actual
  type: Decimal
  default: 0
  description: Último valor medido
- name: fecha_actualizacion
  type: Date
  nullable: true
  description: Fecha última medición
- name: avance_porcentual
  type: Decimal
  computed: true
  formula: "CASE \n  WHEN meta_anual = 0 THEN 0\n  ELSE (valor_actual / meta_anual)\
    \ * 100\nEND\n"
  description: Porcentaje de cumplimiento
- name: tendencia
  type: Enum[Ascendente, Estable, Descendente]
  nullable: true
  description: Comportamiento reciente
- name: valor_anterior
  type: Decimal
  nullable: true
  description: Valor período anterior
- name: estado_semaforo
  type: Enum[Verde, Amarillo, Rojo]
  computed: true
  formula: "CASE \n  WHEN avance_porcentual >= 90 THEN 'Verde'\n  WHEN avance_porcentual\
    \ >= 50 THEN 'Amarillo'\n  ELSE 'Rojo'\nEND\n"
  description: Estado visual del indicador
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Funcionario responsable del indicador
- name: fuente_datos
  type: String
  nullable: true
  description: Origen de los datos (SIGFE, encuesta, etc.)
- name: item_presupuestario
  type: String
  nullable: true
  description: Ítem del presupuesto asociado
- name: cdp_id
  type: String
  fk: ENT-FIN-CDP
  nullable: true
  description: CDP vinculado si aplica
invariants:
- id: INV-IND-001
  name: meta_positiva
  rule: meta_anual > 0
  description: La meta anual debe ser positiva
  severity: error
- id: INV-IND-002
  name: coherencia_trimestral
  rule: "(meta_t1 IS NOT NULL AND meta_t2 IS NOT NULL AND \n meta_t3 IS NOT NULL AND\
    \ meta_t4 IS NOT NULL) →\n(meta_t1 + meta_t2 + meta_t3 + meta_t4) = meta_anual\
    \ OR\nMAX(meta_t1, meta_t2, meta_t3, meta_t4) = meta_anual\n"
  description: Metas trimestrales deben ser coherentes con anual
  severity: warning
id: ENT-GESTION-INDICADORPOA
urn: urn:goreos:entity:d_gestion:ENT-GESTION-INDICADORPOA:1.0.0
name: Indicadorpoa
domain: D-GESTION
