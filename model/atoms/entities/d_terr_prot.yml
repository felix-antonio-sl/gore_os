_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_prot
  type: String
  key: true
  description: Identificador único
- name: region
  type: String
  default: Ñuble
  description: Región a la que aplica
- name: nombre
  type: String
  nullable: false
  description: 'Nombre formal (ej: PROT Región de Ñuble)'
- name: estado
  type: Enum[EnElaboracion, ConsultaCiudadana, EnAprobacion, Vigente, EnActualizacion]
  default: EnElaboracion
  description: Estado del instrumento
- name: fecha_publicacion_do
  type: Date
  nullable: true
  description: Fecha de publicación en Diario Oficial
- name: decreto_aprobatorio
  type: String
  nullable: true
  description: Decreto GORE aprobatorio
- name: resolucion_cgr
  type: String
  nullable: true
  description: Número de Toma de Razón CGR
- name: fecha_vigencia_inicio
  type: Date
  nullable: true
  description: Inicio de vigencia
- name: fecha_ultima_modificacion
  type: Date
  nullable: true
  description: Última modificación
- name: memoria_explicativa_url
  type: String
  nullable: true
  description: URL de la memoria explicativa
- name: normativa_url
  type: String
  nullable: true
  description: URL de la normativa
- name: planos_url
  type: String
  nullable: true
  description: URL de planos de zonificación
- name: cantidad_macrozonas
  type: Integer
  default: 0
  description: Número de macrozonas definidas
- name: cantidad_zonas
  type: Integer
  default: 0
  description: Total de ZonaPROT definidas
- name: proceso_participativo
  type: Boolean
  default: false
  description: ¿Incluye consulta ciudadana?
- name: observaciones_ciudadanas
  type: Integer
  default: 0
  description: Número de observaciones recibidas
- name: erd_vinculada_id
  type: String
  fk: ENT-PLAN-ERD
  nullable: true
  description: ERD vigente al momento de elaboración
invariants:
- id: INV-PROT-001
  name: vigente_requiere_publicacion
  rule: '(estado = ''Vigente'') → (fecha_publicacion_do IS NOT NULL)

    '
  description: PROT vigente requiere publicación DO
  severity: error
- id: INV-PROT-002
  name: vigente_requiere_tdr
  rule: '(estado = ''Vigente'') → (resolucion_cgr IS NOT NULL)

    '
  description: PROT vigente requiere Toma de Razón CGR
  severity: error
