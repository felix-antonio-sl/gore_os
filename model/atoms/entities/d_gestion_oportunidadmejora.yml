_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_oportunidad
  type: String
  key: true
  description: 'Identificador único (ej: OP-2025-001)'
- name: titulo
  type: String
  nullable: false
  description: Título descriptivo
- name: descripcion
  type: Text
  nullable: false
  description: Descripción detallada del problema/oportunidad
- name: fuente
  type: Enum[UC, CGR, Encuesta, Playbook, FENIX, Funcionario, OIRS, ProcesoInterno]
  nullable: false
  description: Origen de la oportunidad
- name: fuente_id
  type: String
  nullable: true
  description: ID del elemento origen (riesgo, playbook, etc.)
- name: area
  type: String
  nullable: false
  description: Área o proceso afectado
- name: division_id
  type: String
  fk: ENT-BACK-DIVISION
  nullable: true
  description: División relacionada
- name: impacto_estimado
  type: Enum[Bajo, Medio, Alto, MuyAlto]
  nullable: false
  description: Impacto potencial de la mejora
- name: esfuerzo_estimado
  type: Enum[Bajo, Medio, Alto, MuyAlto]
  nullable: false
  description: Esfuerzo/recursos necesarios
- name: prioridad
  type: Enum[Urgente, Alta, Media, Baja]
  computed: true
  formula: "CASE \n  WHEN impacto_estimado = 'MuyAlto' AND esfuerzo_estimado IN ('Bajo',\
    \ 'Medio') THEN 'Urgente'\n  WHEN impacto_estimado = 'Alto' THEN 'Alta'\n  WHEN\
    \ impacto_estimado = 'Medio' THEN 'Media'\n  ELSE 'Baja'\nEND\n"
  description: Prioridad calculada
- name: quick_win
  type: Boolean
  computed: true
  formula: impacto_estimado IN ('Alto', 'MuyAlto') AND esfuerzo_estimado = 'Bajo'
  description: ¿Es un quick win?
- name: identificador_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
  description: Quien identificó la oportunidad
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Responsable asignado
- name: estado
  type: Enum[Pendiente, EnEvaluacion, Aprobada, EnImplementacion, Cerrada, Descartada]
  default: Pendiente
  description: Estado actual
- name: motivo_descarte
  type: Text
  nullable: true
  description: Razón si fue descartada
- name: fecha_registro
  type: Date
  nullable: false
  description: Fecha de registro
- name: fecha_evaluacion
  type: Date
  nullable: true
  description: Fecha de evaluación
- name: fecha_cierre
  type: Date
  nullable: true
  description: Fecha de cierre
- name: proyecto_mejora_id
  type: String
  fk: ENT-GESTION-PROYECTO-MEJORA
  nullable: true
  description: Proyecto generado si fue aprobada
invariants:
- id: INV-OP-001
  name: aprobada_requiere_responsable
  rule: estado = 'Aprobada' → responsable_id IS NOT NULL
  description: Oportunidad aprobada debe tener responsable
  severity: error
- id: INV-OP-002
  name: descartada_requiere_motivo
  rule: estado = 'Descartada' → motivo_descarte IS NOT NULL
  description: Descarte debe justificarse
  severity: warning
