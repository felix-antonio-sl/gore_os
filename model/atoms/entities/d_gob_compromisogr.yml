_meta:
  urn: urn:goreos:entity:unknown:unknown:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_compromiso
  type: String
  key: true
  description: Identificador único
- name: descripcion
  type: Text
  nullable: false
  description: Descripción del compromiso
- name: tipo_origen
  type: Enum[Audiencia, VisitaTerreno, SesionCORE, ActoPublico, Correspondencia, Otro]
  nullable: false
  description: Tipo de origen
- name: audiencia_id
  type: String
  fk: ENT-GOB-AUDIENCIA
  nullable: true
  description: Audiencia de origen (si aplica)
- name: sesion_core_id
  type: String
  fk: ENT-GOB-SESION-CORE
  nullable: true
  description: Sesión CORE de origen (si aplica)
- name: fecha_compromiso
  type: Date
  nullable: false
  description: Fecha en que se adquirió
- name: beneficiario_id
  type: String
  fk: ENT-GOB-ACTOR
  nullable: true
  description: Actor beneficiario
- name: beneficiario_descripcion
  type: String
  nullable: true
  description: Descripción si no es actor registrado
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
  description: Funcionario responsable
- name: division_responsable
  type: String
  nullable: true
  description: División a cargo
- name: fecha_limite
  type: Date
  nullable: false
  description: Fecha límite de cumplimiento
- name: semaforo
  type: Enum[Verde, Amarillo, Rojo]
  computed: true
  formula: 'IF dias_restantes > 7 THEN Verde

    ELIF dias_restantes > 0 THEN Amarillo

    ELSE Rojo

    '
  description: Estado semáforo
- name: dias_restantes
  type: Integer
  computed: true
  formula: fecha_limite - TODAY()
  description: Días hasta vencimiento
- name: ultimo_avance
  type: Text
  nullable: true
  description: Último reporte de avance
- name: fecha_ultimo_avance
  type: Date
  nullable: true
  description: Fecha del último avance
- name: porcentaje_avance
  type: Integer
  default: 0
  description: Porcentaje de avance 0-100
- name: estado
  type: Enum[Pendiente, EnCurso, Cumplido, Reprogramado, Cancelado]
  default: Pendiente
  description: Estado del compromiso
- name: fecha_cumplimiento
  type: Date
  nullable: true
  description: Fecha efectiva de cumplimiento
- name: evidencia_cumplimiento
  type: String
  nullable: true
  description: URL o descripción de evidencia
- name: escalado
  type: Boolean
  default: false
  description: ¿Fue escalado a Gabinete?
- name: fecha_escalamiento
  type: Date
  nullable: true
  description: Fecha de escalamiento
invariants:
- id: INV-COMP-001
  name: cumplido_requiere_evidencia
  rule: 'estado = ''Cumplido'' → evidencia_cumplimiento IS NOT NULL

    '
  description: Cumplimiento requiere evidencia
  severity: warning
- id: INV-COMP-002
  name: vencido_debe_escalar
  rule: '(semaforo = ''Rojo'' AND estado = ''EnCurso'') → escalado = true (dentro
    de 3 días)

    '
  description: Compromisos vencidos deben escalarse
  severity: warning
