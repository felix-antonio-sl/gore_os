# Traceability Matrix: GORE OS Specification Artifacts
# Functor Pipeline: D (Domain) → R (Requirements) → S (System)
# Generated: 2025-12-15
---
_manifest:
  urn: "urn:knowledge:goreos:traceability:matrix:1.0.0"
  purpose: "Map User Stories to Domain Entities and System Processes"
  sources:
    domain: "data-gore/ontology/entidades_dominio_puro.yml"
    requirements: "gore_os/docs/02_requirements/user_stories_legacy.md"
    system: "gorenuble/knowledge/domains/gn/arquitectura/kb_gn_054_bpmn_c4_koda.yml"

# =============================================================================
# MÓDULO M1: IPR (SNI) — Gestión de Inversión Pública Regional
# =============================================================================
M1_IPR:
  stories:
    - id: FE-IPR-001
      title: "Consultar árbol de decisión financiamiento"
      priority: Crítica
      domain_refs:
        roles: [ROL-FORMULADOR]
        entities: [ENT-IPR, TIPO-IPR-COPROD]
        enums: [Selector_Mecanismo]
      process_refs:
        bpmn: null # No hay proceso BPMN específico
      component_refs:
        c4: COMP-SELECTOR-MECANISMO

    - id: FE-IPR-003
      title: "Cargar postulación IPR con antecedentes digitalizados"
      priority: Crítica
      domain_refs:
        roles: [ROL-FORMULADOR, ENT-UNID-FORM]
        entities: [ENT-IPR, Carpeta_Digital_BIP]
        states: [Estados_IPR.POSTULADA]
      process_refs:
        bpmn: BPMN-GN-RES-EXENTAS-FASE-INICIACION-01
      component_refs:
        c4: COMP-IPR-INTAKE

    - id: FE-IPR-006
      title: "Consultar estado en tiempo real (timeline visual)"
      priority: Crítica
      domain_refs:
        roles: [ROL-FORMULADOR]
        entities: [ENT-IPR, FSM_IPR_Unificada]
        states: [Estados_IPR]
      process_refs:
        bpmn: null
      component_refs:
        c4: COMP-IPR-TRACKING

    - id: DIPIR-PRE-01
      title: "Evaluar Admisibilidad Formal (Checklist documental)"
      priority: Crítica
      domain_refs:
        roles: [ROL-ANAL-PREINV]
        entities: [ENT-IPR, F2_ADMISIBILIDAD]
        states: [Estados_Admisibilidad_IPR]
      process_refs:
        bpmn: BPMN-GN-RES-EXENTAS-FASE-REVISION-JURIDICA-01
      component_refs:
        c4: COMP-ADMISIBILIDAD

    - id: DIPIR-PRE-07
      title: "Registrar resultado evaluación externa (RS/RF/AD/OT)"
      priority: Crítica
      domain_refs:
        roles: [ROL-ANAL-PREINV, ROL-EVALUADOR]
        entities: [ENT-RATE, F3_EVALUACION]
        enums: [RS, FI, OT, RF, AD, NV]
      process_refs:
        bpmn: null
      component_refs:
        c4: COMP-EVALUACION

    - id: AD-IPR-009
      title: "Generar cartera RS para sesión CORE"
      priority: Alta
      domain_refs:
        roles: [ROL-ANAL-PREINV]
        entities: [ENT-IPR, CORE, SESION-CORE]
        states: [Estados_IPR.EN_CARTERA]
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-APROBACION-STEP-02
      component_refs:
        c4: COMP-CARTERA-CORE

# =============================================================================
# MÓDULO M2: PRESUPUESTO — Gestión Financiera
# =============================================================================
M2_PRESUPUESTO:
  stories:
    - id: PD-PPTO-001
      title: "Emitir CDP validando saldo en asignación"
      priority: Crítica
      domain_refs:
        roles: [ROL-JEFE-DAF]
        entities: [CDP, Código_Presupuestario]
        states: null
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-CADENA-STEP-01
      component_refs:
        c4: COMP-CDP

    - id: PPTO-FORM-01
      title: "Elaborar proyecto presupuesto inversiones alineado con ERD"
      priority: Crítica
      domain_refs:
        roles: [DIV-DIPIR]
        entities: [FNDR, ARI_PROPIR]
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-FORMULACION-STEP-01
      component_refs:
        c4: COMP-FORMULACION-PPTO

    - id: PPTO-APR-01
      title: "Presentar distribución inicial al CORE"
      priority: Crítica
      domain_refs:
        roles: [GOB-REG]
        entities: [CORE, SESION-CORE]
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-APROBACION-STEP-01
      component_refs:
        c4: COMP-APROBACION-CORE

    - id: PPTO-EJEC-01
      title: "Gestionar grados de afectación (CDP→compromiso→devengo→pago)"
      priority: Crítica
      domain_refs:
        roles: [DIV-DAF]
        entities: [Cadena_Presupuestaria_SIGFE]
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-CADENA-SIGFE-01
      component_refs:
        c4: COMP-EJECUCION-SIGFE

# =============================================================================
# MÓDULO M3: CONVENIOS — Transferencias y Rendiciones
# =============================================================================
M3_CONVENIOS:
  stories:
    - id: PD-CONV-004
      title: "Registrar cuotas transferencia (calendario)"
      priority: Crítica
      domain_refs:
        roles: [ROL-RTF]
        entities: [Convenio_Mandato, FSM_Convenio]
        states: [Estados_Convenio]
      process_refs:
        bpmn: PROC-GORE-BPMN-TRAMITACION-CONVENIOS-01
      component_refs:
        c4: COMP-CONVENIOS

    - id: RTF-002
      title: "Revisar rendiciones (aprobar/observar)"
      priority: Crítica
      domain_refs:
        roles: [ROL-RTF, ROL-UCR]
        entities: [ENT-EJECUTOR]
      process_refs:
        bpmn: BPMN-GN-CONVENIOS-DET-STEP-04
      component_refs:
        c4: COMP-RENDICIONES

# =============================================================================
# MÓDULO M5: CORE — Gobernanza Regional
# =============================================================================
M5_CORE:
  stories:
    - id: CR-001
      title: "Carpeta digital sesión (notificación + docs)"
      priority: Crítica
      domain_refs:
        roles: [CONSEJERO]
        entities: [CORE, SESION-CORE, IUIe]
      process_refs:
        bpmn: BPMN-GN-PRESUPUESTO-APROBACION-STEP-02
      component_refs:
        c4: COMP-SESION-CORE

    - id: GR-EST-07
      title: "Presidir sesiones CORE (voto dirimente, tabla)"
      priority: Crítica
      domain_refs:
        roles: [GOB-REG]
        entities: [CORE, SESION-CORE]
        states: [Estados_Sesion]
      process_refs:
        bpmn: null
      component_refs:
        c4: COMP-SESION-CORE

# =============================================================================
# MÓDULO M10: TIC — Gobernanza Digital
# =============================================================================
M10_TIC:
  stories:
    - id: tic-002
      title: "Gestionar identidad digital (ClaveÚnica/SSO)"
      priority: Crítica
      domain_refs:
        roles: [ROL-CTD, ROL-CISO]
        entities: [IUIe]
      process_refs:
        bpmn: null
      component_refs:
        c4: COMP-IAM

    - id: CTD-03
      title: "Asegurar Expediente Electrónico (DS10)"
      priority: Crítica
      domain_refs:
        roles: [ROL-CTD]
        entities: [IUIe, Metadato_ISO19115]
      process_refs:
        bpmn: BPMN-GN-ACTOS-EXPEDIENTE-FEA-01
      component_refs:
        c4: COMP-EXPEDIENTE

# =============================================================================
# RESUMEN DE COBERTURA
# =============================================================================
coverage_summary:
  total_stories_mapped: 18
  stories_with_bpmn: 11
  stories_without_bpmn: 7
  modules_covered: [M1, M2, M3, M5, M10]
  modules_pending: [M4, M6, M7, M20-M26]
  note: "Mapeo inicial de stories críticas. Expandir según necesidad."
