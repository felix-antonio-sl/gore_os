# ==============================================================================
# GORE_OS Entity Atom: NivelMadurez
# ==============================================================================
# Domain: D-EVOL (Evolución e Inteligencia)
# Subdomain: Trayectoria Evolutiva
# Source: ORKO WSLC (L0-L5)
# ==============================================================================

_metadata:
  version: "1.0.0"
  status: active
  created_at: "2025-12-22"
  created_by: "Arquitecto Categórico + Arquitecto ORKO"
  domain: D-EVOL
  subdomain: trayectoria_evolutiva
  kb_source:
    - "urn:knowledge:orko:core:fundamentos:1.0.0"
    - "dialogo_triagente_d_evol.md"

entity:
  id: ENT-EVOL-NIVEL-MADUREZ
  name: NivelMadurez
  name_es: Nivel de Madurez
  description: |
    Evaluación de madurez organizacional (L0-L5) de un sistema, proceso o
    dominio. Parte del ciclo WSLC (Work System LifeCycle) de ORKO.

    Niveles:
    - L0: Inicial (ad-hoc, sin estandarización)
    - L1: Digitalizado (captura digital, trazabilidad)
    - L2: Integrado (datos unificados, paneles tiempo real)
    - L3: Automatizado (alertas, validaciones, flujos automáticos)
    - L4: Inteligente (decisiones asistidas por IA, M2-M4)
    - L5: Autónomo (agentes IA operativos M5-M6)

  purpose: |
    Modelar trayectorias de evolución para:
    - Tablero de madurez por dominio/sistema
    - Identificación de brechas
    - Planificación de inversión tecnológica
    - Benchmark regional (GAP Ñuble vs otros GOREs)

  categorical_type: Object
  is_abstract: false
  category: Assessment
  orko_cycle: WSLC
  orko_invariant: I7_Emergencia

attributes:
  # Identificación
  - name: id_nivel
    type: String
    key: true

  # Entidad Evaluada
  - name: entidad_evaluada_id
    type: String
    nullable: false
    description: "ID del sistema, proceso o dominio evaluado"

  - name: tipo_entidad
    type: Enum[Sistema, Proceso, Dominio, Capacidad]
    nullable: false

  - name: entidad_nombre
    type: String
    nullable: false
    description: "Nombre para display"

  # Niveles
  - name: nivel_actual
    type: Enum[L0_Inicial, L1_Digitalizado, L2_Integrado, L3_Automatizado, L4_Inteligente, L5_Autonomo]
    nullable: false

  - name: nivel_objetivo
    type: Enum[L0_Inicial, L1_Digitalizado, L2_Integrado, L3_Automatizado, L4_Inteligente, L5_Autonomo]
    nullable: false

  # Temporalidad
  - name: fecha_evaluacion
    type: Date
    nullable: false

  - name: fecha_objetivo
    type: Date
    nullable: true
    description: "Fecha meta para alcanzar nivel objetivo"

  # Brechas y Plan
  - name: brechas
    type: Array[String]
    nullable: true
    description: "Lista de brechas identificadas"

  - name: plan_evolucion_id
    type: String
    nullable: true
    description: "Plan de evolución asociado"

  # Métricas
  - name: puntaje_madurez
    type: Decimal
    nullable: true
    description: "Score numérico 0-100"

  - name: gap_niveles
    type: Integer
    computed: true
    formula: nivel_objetivo - nivel_actual

  # Evaluador
  - name: evaluador_id
    type: String
    fk: ENT-BACK-FUNCIONARIO
    nullable: true

invariants:
  - id: INV-NM-001
    name: objetivo_mayor_igual_actual
    rule: nivel_objetivo >= nivel_actual
    description: "No se puede retroceder de objetivo"

  - id: INV-NM-002
    name: emergencia_practica_valida
    rule: "(nivel_actual = 'L4' OR nivel_actual = 'L5') → ∃ Capacidad con sustrato = 'Algoritmico'"
    description: "L4/L5 requiere capacidades algorítmicas (I7_Emergencia)"
    orko_ref: I7_Emergencia

morphisms:
  evalua: [ENT-EVOL-SISTEMA, ENT-EVOL-CAPACIDAD]
  pertenece_a: [ENT-BACK-DIVISION]

audit:
  fields_tracked:
    - nivel_actual
    - nivel_objetivo
    - fecha_evaluacion
  retention_years: 5
  legal_basis: "Framework ORKO, Estrategia TI Regional"
