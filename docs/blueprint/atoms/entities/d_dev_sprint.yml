# ==============================================================================
# GORE_OS Entity Atom: Sprint
# ==============================================================================
# Domain: D-DEV (Desarrollo del Sistema)
# Subdomain: Gestión de Producto (M1)
# ==============================================================================

_metadata:
  version: "1.0.0"
  status: active
  created_at: "2025-12-22"
  created_by: "Ingeniero Software Composicional"
  domain: D-DEV
  subdomain: gestion_producto

entity:
  id: ENT-DEV-SPRINT
  name: Sprint
  name_es: Sprint
  description: |
    Iteración de trabajo de duración fija (típicamente 2 semanas)
    donde el equipo se compromete a entregar un conjunto de stories.

  purpose: |
    Modelar sprints para:
    - Planificación iterativa
    - Medición de velocidad
    - Gestión de compromisos

  categorical_type: Object
  is_abstract: false
  category: Process

attributes:
  - name: id_sprint
    type: String
    key: true

  - name: numero
    type: Integer
    nullable: false

  - name: nombre
    type: String
    nullable: true
    description: "Ej: Sprint 2025-Q1-03"

  - name: objetivo
    type: String
    nullable: true
    description: "Sprint Goal"

  - name: fecha_inicio
    type: Date
    nullable: false

  - name: fecha_fin
    type: Date
    nullable: false

  - name: estado
    type: Enum[Planning, Active, Review, Closed]
    default: Planning

  - name: capacidad_puntos
    type: Integer
    nullable: true
    description: "Capacidad del equipo en puntos"

  - name: puntos_comprometidos
    type: Integer
    nullable: true

  - name: puntos_completados
    type: Integer
    computed: true
    formula: SUM(stories.story_points WHERE stories.estado = 'Done')

  - name: velocidad
    type: Decimal
    computed: true
    formula: puntos_completados / capacidad_puntos * 100

invariants:
  - id: INV-SPRINT-001
    name: fechas_validas
    rule: fecha_fin > fecha_inicio
    description: "La fecha de fin debe ser posterior al inicio"

  - id: INV-SPRINT-002
    name: numero_unico
    rule: UNIQUE(numero)
    description: "El número de sprint debe ser único"

morphisms:
  contiene_stories: [ENT-DEV-STORY]
  genera_release: [ENT-DEV-RELEASE]

audit:
  fields_tracked:
    - estado
    - puntos_completados
  retention_years: 3
