{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "KODA Schema",
  "description": "Esquema de validación para artefactos KODA (Knowledge-Oriented Document Architecture)",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Referencia al esquema de validación"
    },
    "Manifest": {
      "type": "object",
      "description": "Información de identificación y control del artefacto",
      "properties": {
        "URN": {
          "type": "string",
          "description": "Identificador único del recurso de conocimiento",
          "pattern": "^urn:knowledge:[a-z0-9_]+:[a-z0-9_]+:[a-z0-9_]+:[a-z0-9_]+$"
        },
        "Version": {
          "type": "string",
          "description": "Versión semántica del artefacto",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "Status": {
          "type": "string",
          "description": "Estado del artefacto",
          "enum": ["Draft", "Review", "Approved", "Published", "Deprecated", "Archived"]
        },
        "Classification": {
          "type": "string",
          "description": "Clasificación del contenido",
          "enum": ["Strategic", "Tactical", "Operational", "Reference", "Template"]
        },
        "Stability": {
          "type": "string",
          "description": "Nivel de estabilidad del contenido",
          "enum": ["Stable", "Evolving", "Experimental", "Deprecated"]
        }
      },
      "required": ["URN", "Version", "Status"]
    },
    "Metadata": {
      "type": "object",
      "description": "Metadatos descriptivos del artefacto",
      "properties": {
        "Title": {
          "type": "string",
          "description": "Título del artefacto"
        },
        "Description": {
          "type": "string",
          "description": "Descripción detallada del propósito y contenido"
        },
        "Domain": {
          "type": "string",
          "description": "Dominio principal del conocimiento"
        },
        "Subdomain": {
          "type": "string",
          "description": "Subdominio específico"
        },
        "Author": {
          "type": "string",
          "description": "Autor o equipo responsable"
        },
        "Created": {
          "type": "string",
          "description": "Fecha de creación (YYYY-MM-DD)",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
        },
        "Updated": {
          "type": "string",
          "description": "Fecha de última actualización (YYYY-MM-DD)",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
        },
        "Ctx": {
          "type": "string",
          "description": "Contexto de uso del artefacto"
        },
        "LLM_Parsing_Instructions": {
          "type": "string",
          "description": "Instrucciones para procesamiento por LLMs"
        },
        "Tags": {
          "type": "array",
          "description": "Etiquetas para búsqueda y clasificación",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["Title", "Domain", "Created"]
    },
    "Referencias": {
      "type": "object",
      "description": "Referencias a otros artefactos o documentos",
      "properties": {
        "Internas": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "titulo": {"type": "string"},
              "relacion": {"type": "string"}
            }
          }
        },
        "Externas": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "titulo": {"type": "string"},
              "urn": {"type": "string"},
              "url": {"type": "string"}
            }
          }
        }
      }
    }
  },
  "required": ["Manifest", "Metadata"]
}
