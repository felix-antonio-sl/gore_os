_meta:
  urn: urn:goreos:entity:d_alertafenix:ENT-ALERTAFENIX-FENIX_ALERTAFENIX:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_alerta
  type: String
  key: true
  description: 'Identificador único (ej: ALT-2025-001)'
- name: codigo
  type: String
  nullable: true
  description: Código corto de alerta
- name: fuente
  type: Enum[Automatica, Manual]
  nullable: false
  description: Tipo de activación
- name: trigger_tipo
  type: Enum[HGore, IPREstancada, ConvenioVencer, CrisisSeguridad, CGRObservacion,
    SolicitudJefatura, Otro]
  nullable: false
  description: Tipo de disparador
- name: trigger_origen_id
  type: String
  nullable: true
  description: ID del objeto origen (PuntajeSaludGore, IPR, etc.)
- name: dominio_origen
  type: Enum[D-GESTION, D-FIN, D-EJEC, D-SEG, D-NORM, D-GOB, D-TDE, Otro]
  nullable: false
  description: Dominio donde se originó la alerta
- name: metricas_reportadas
  type: JSON
  nullable: true
  description: "Métricas que dispararon la alerta:\n{\n  \"h_gore\": 48,\n  \"dias_estancamiento\"\
    : 95,\n  \"monto_en_riesgo\": 500000000\n}\n"
- name: umbral_violado
  type: String
  nullable: true
  description: 'Regla violada (ej: H_gore < 50)'
- name: descripcion
  type: Text
  nullable: false
  description: Descripción de la situación
- name: impacto_potencial
  type: Enum[Critico, Alto, Medio, Bajo]
  nullable: false
  description: Impacto potencial evaluado
- name: nivel_sugerido
  type: Enum[I, II, III, IV]
  nullable: true
  description: Nivel de intervención sugerido
- name: evaluador_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: true
  description: Quien evalúa la alerta
- name: fecha_evaluacion
  type: Date
  nullable: true
- name: evaluacion_preliminar
  type: Text
  nullable: true
  description: Análisis preliminar de la situación
- name: decision
  type: Enum[Pendiente, Descartar, Monitorear, Intervenir]
  default: Pendiente
  description: Decisión tomada
- name: motivo_decision
  type: Text
  nullable: true
  description: Justificación de la decisión
- name: intervencion_generada_id
  type: String
  fk: ENT-FENIX-INTERVENCION
  nullable: true
  description: ID de intervención si se creó
- name: estado
  type: Enum[Nueva, EnEvaluacion, Resuelta, Escalada]
  default: Nueva
- name: fecha_alerta
  type: DateTime
  nullable: false
  description: Fecha/hora de la alerta
- name: fecha_resolucion
  type: DateTime
  nullable: true
- name: tiempo_respuesta_horas
  type: Decimal
  computed: true
  description: Horas entre alerta y resolución
invariants:
- id: INV-ALT-001
  name: intervenir_genera_intervencion
  rule: decision = 'Intervenir' → intervencion_generada_id IS NOT NULL
  description: Decisión de intervenir debe generar intervención
  severity: error
- id: INV-ALT-002
  name: descartar_requiere_motivo
  rule: decision = 'Descartar' → motivo_decision IS NOT NULL
  description: Descarte debe justificarse
  severity: warning
- id: INV-ALT-003
  name: critico_requiere_evaluacion_rapida
  rule: impacto_potencial = 'Critico' AND estado = 'Nueva' → tiempo_respuesta_horas
    <= 4
  description: Alertas críticas deben evaluarse en 4 horas
  severity: warning
id: ENT-ALERTAFENIX-FENIX_ALERTAFENIX
urn: urn:goreos:entity:d_alertafenix:ENT-ALERTAFENIX-FENIX_ALERTAFENIX:1.0.0
name: Fenix Alertafenix
domain: D-ALERTAFENIX
