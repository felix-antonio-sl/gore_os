_meta:
  urn: urn:goreos:entity:d_gestion:ENT-GESTION-H_GORE:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_hgore
  type: String
  key: true
  description: 'Identificador único (ej: HGORE-V1)'
- name: version
  type: String
  nullable: false
  default: '1.0'
  description: Versión de la fórmula
- name: nombre
  type: String
  default: H_gore
  description: Nombre del indicador
- name: descripcion
  type: Text
  nullable: true
  description: Descripción de esta versión
- name: formula
  type: Text
  nullable: false
  description: 'Fórmula de cálculo:

    H_gore = Σ(dimension_i.valor * dimension_i.peso)

    '
- name: dimensiones_activas
  type: Array[String]
  nullable: false
  description: IDs de DimensionSalud que participan
- name: pesos_vigentes
  type: JSON
  nullable: false
  description: "Pesos por dimensión:\n{\n  \"ejecucion_presupuestaria\": 0.20,\n \
    \ \"cartera_ipr\": 0.20,\n  \"responsabilidades\": 0.20,\n  \"cumplimiento_normativo\"\
    : 0.15,\n  \"clima_organizacional\": 0.10,\n  \"satisfaccion_ciudadana\": 0.10,\n\
    \  \"madurez_digital\": 0.05\n}\n"
- name: umbral_optimo
  type: Integer
  default: 80
  description: Mínimo para estado óptimo
- name: umbral_atencion
  type: Integer
  default: 60
  description: Mínimo para estado atención
- name: umbral_critico
  type: Integer
  default: 50
  description: Mínimo para estado crítico
- name: umbral_emergencia
  type: Integer
  default: 50
  description: Debajo de este → FENIX obligatorio
- name: dias_sostenido_critico
  type: Integer
  default: 14
  description: Días en crítico antes de notificación
- name: activa_fenix_automatico
  type: Boolean
  default: true
  description: ¿Activa FENIX al llegar a emergencia?
- name: frecuencia_calculo
  type: Enum[Diaria, Semanal, Quincenal, Mensual]
  default: Semanal
  description: Frecuencia de recálculo
- name: activo
  type: Boolean
  default: true
  description: ¿Versión vigente?
- name: fecha_vigencia_desde
  type: Date
  nullable: false
- name: fecha_vigencia_hasta
  type: Date
  nullable: true
invariants:
- id: INV-HG-001
  name: pesos_suman_uno
  rule: SUM(pesos_vigentes.values) = 1.0
  description: Los pesos deben sumar 100%
  severity: error
- id: INV-HG-002
  name: umbrales_ordenados
  rule: umbral_emergencia <= umbral_critico <= umbral_atencion <= umbral_optimo
  description: Umbrales deben estar ordenados
id: ENT-GESTION-H_GORE
urn: urn:goreos:entity:d_gestion:ENT-GESTION-H_GORE:1.0.0
name: H Gore
domain: D-GESTION
