_meta:
  urn: urn:goreos:entity:d_ops:ENT-OPS-ASIGNACIONROL:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_asignacion
  type: String
  key: true
- name: usuario_id
  type: String
  fk: ENT-OPS-USUARIO-SISTEMA
  nullable: false
- name: rol_id
  type: String
  fk: ENT-OPS-ROL
  nullable: false
- name: fecha_inicio
  type: Date
  nullable: false
- name: fecha_fin
  type: Date
  nullable: true
  description: NULL = asignación permanente
- name: motivo
  type: String
  nullable: true
  description: Justificación de la asignación
- name: asignado_por_id
  type: String
  fk: ENT-OPS-USUARIO-SISTEMA
  nullable: false
- name: estado
  type: Enum[Activa, Expirada, Revocada]
  default: Activa
- name: revocado_por_id
  type: String
  fk: ENT-OPS-USUARIO-SISTEMA
  nullable: true
- name: fecha_revocacion
  type: DateTime
  nullable: true
invariants:
- id: INV-ASIG-001
  name: fechas_validas
  rule: fecha_fin IS NULL OR fecha_fin > fecha_inicio
  description: Fecha fin debe ser posterior a inicio
- id: INV-ASIG-002
  name: revocada_tiene_datos
  rule: estado = 'Revocada' → revocado_por_id IS NOT NULL AND fecha_revocacion IS
    NOT NULL
  description: Asignación revocada debe tener auditoría
id: ENT-OPS-ASIGNACIONROL
urn: urn:goreos:entity:d_ops:ENT-OPS-ASIGNACIONROL:1.0.0
name: Asignacionrol
domain: D-OPS
