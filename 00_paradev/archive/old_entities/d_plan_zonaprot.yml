_meta:
  urn: urn:goreos:entity:d_plan:ENT-PLAN-ZONAPROT:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_zona
  type: String
  key: true
  description: Identificador único de la zona
- name: prot_id
  type: String
  nullable: false
  description: PROT al que pertenece
- name: codigo_zona
  type: String
  nullable: false
  description: Código en el instrumento (ej. ZU-01)
- name: nombre
  type: String
  nullable: false
  description: Nombre de la zona
- name: macrozona
  type: String
  nullable: false
  description: Macrozona contenedora
- name: tipo_uso
  type: Enum[PreferenteUrbano, PreferenteRural, Conservacion, Restriccion, Mixto,
    Especial]
  nullable: false
  description: Clasificación principal de uso
- name: usos_permitidos
  type: Array[String]
  nullable: true
  description: Usos permitidos sin condición
- name: usos_condicionados
  type: Array[String]
  nullable: true
  description: Usos que requieren evaluación
- name: usos_prohibidos
  type: Array[String]
  nullable: true
  description: Usos expresamente prohibidos
- name: condiciones_vinculantes
  type: Text
  nullable: true
  description: Condiciones legales vinculantes
- name: geometria
  type: Geometry
  geometry_type: Polygon
  nullable: false
  description: Polígono de la zona
- name: superficie_ha
  type: Decimal
  nullable: true
  description: Superficie en hectáreas
- name: restriccion_riesgo
  type: Enum[Sin, Inundacion, Remocion, Incendio, Multiple]
  default: Sin
  description: Restricción por riesgo aplicable
- name: estado
  type: Enum[Borrador, Vigente, EnActualizacion, Derogada]
  default: Vigente
  description: Estado de la zona
- name: comunas_abarcadas
  type: Array[String]
  nullable: true
  description: Comunas que intersecta la zona
invariants:
- id: INV-ZPROT-001
  name: geometria_valida
  rule: ST_IsValid(geometria) = true
  description: La geometría debe ser válida
  severity: error
- id: INV-ZPROT-002
  name: codigo_unico_por_prot
  rule: UNIQUE(prot_id, codigo_zona)
  description: Código único dentro del PROT
  severity: error
id: ENT-PLAN-ZONAPROT
urn: urn:goreos:entity:d_plan:ENT-PLAN-ZONAPROT:1.0.0
name: Zonaprot
domain: D-PLAN
