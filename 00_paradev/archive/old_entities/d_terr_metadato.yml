_meta:
  urn: urn:goreos:entity:d_terr:ENT-TERR-METADATO:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_metadato
  type: String
  key: true
  description: Identificador único del metadato
- name: capa_id
  type: String
  fk: ENT-TERR-CAPA
  nullable: false
  description: Capa que describe
- name: titulo
  type: String
  nullable: false
  description: Título del recurso
- name: resumen
  type: Text
  nullable: false
  description: Resumen descriptivo
- name: palabras_clave
  type: Array[String]
  nullable: false
  description: Palabras clave para búsqueda
- name: tematica
  type: String
  nullable: false
  description: Categoría temática ISO
- name: alcance_espacial
  type: Geometry
  nullable: true
  description: Extensión geográfica
- name: alcance_temporal_inicio
  type: Date
  nullable: true
  description: Inicio período temporal
- name: alcance_temporal_fin
  type: Date
  nullable: true
  description: Fin período temporal
- name: linaje
  type: Text
  nullable: true
  description: Procedencia y procesamiento
- name: precision_posicional
  type: Decimal
  nullable: true
  description: Precisión posicional en metros
- name: precision_temporal
  type: String
  nullable: true
  description: Precisión temporal
- name: completitud
  type: Decimal
  nullable: true
  description: Porcentaje de completitud
- name: consistencia_logica
  type: Boolean
  nullable: true
  description: ¿Pasa validación lógica?
- name: formatos
  type: Array[Enum[GeoJSON, GML, KML, Shapefile, GeoTIFF, CSV]]
  nullable: true
  description: Formatos disponibles
- name: url_descarga
  type: String
  nullable: true
  description: URL de descarga
- name: url_servicio
  type: String
  nullable: true
  description: URL de servicio OGC
- name: terminos_uso
  type: Text
  nullable: true
  description: Términos de uso y restricciones
- name: licencia
  type: String
  nullable: true
  description: Código de licencia
- name: responsable
  type: String
  nullable: false
  description: Organización responsable
- name: rol_responsable
  type: Enum[Propietario, Custodio, Distribuidor, Autor]
  default: Propietario
  description: Rol según ISO
- name: contacto_nombre
  type: String
  nullable: true
  description: Nombre de contacto
- name: contacto_email
  type: String
  nullable: false
  description: Email de contacto
- name: contacto_telefono
  type: String
  nullable: true
  description: Teléfono de contacto
- name: fecha_creacion
  type: Date
  nullable: false
  description: Fecha de creación del metadato
- name: fecha_publicacion
  type: Date
  nullable: true
  description: Fecha de publicación
- name: fecha_revision
  type: Date
  nullable: true
  description: Última revisión
- name: frecuencia_mantenimiento
  type: Enum[Continuo, Diario, Semanal, Mensual, Anual, Irregular]
  default: Irregular
  description: Frecuencia de mantenimiento
- name: estado
  type: Enum[Borrador, Validado, Publicado, Obsoleto]
  default: Borrador
  description: Estado del metadato
invariants:
- id: INV-META-001
  name: campos_minimos_lamp
  rule: "titulo IS NOT NULL AND resumen IS NOT NULL AND \npalabras_clave IS NOT NULL\
    \ AND contacto_email IS NOT NULL\n"
  description: Campos mínimos LAMPv2
  severity: error
- id: INV-META-002
  name: publicado_requiere_validacion
  rule: '(estado = ''Publicado'') → (consistencia_logica = true OR consistencia_logica
    IS NULL)

    '
  description: Metadato publicado debe pasar validación
id: ENT-TERR-METADATO
urn: urn:goreos:entity:d_terr:ENT-TERR-METADATO:1.0.0
name: Metadato
domain: D-TERR
