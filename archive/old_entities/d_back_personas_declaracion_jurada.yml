_meta:
  urn: urn:goreos:entity:d-back:declaracion-jurada:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
id: ENT-BACK-DECLARACION_JURADA
urn: urn:goreos:entity:d-back:declaracion-jurada:1.0.0
name: Declaración Jurada de Probidad
domain: D-BACK
subdomain: personas
category: Transaction
is_abstract: false
attributes:
- name: id_declaracion
  type: String
  key: true
- name: funcionario_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
- name: tipo_declaracion
  type: Enum[Patrimonio, Intereses, Inhabilidades]
  nullable: false
- name: fecha_obligacion
  type: Date
  nullable: false
  description: Fecha a partir de la cual nace la obligación
- name: fecha_vencimiento
  type: Date
  nullable: false
  description: 60 días desde asunción o 31/marzo para actualización
- name: fecha_presentacion
  type: Date
  nullable: true
- name: fecha_ultima_actualizacion
  type: Date
  nullable: true
- name: plataforma
  type: Enum[InfoProbidadCGR, SistemaInterno, Papel]
  default: InfoProbidadCGR
- name: numero_folio
  type: String
  nullable: true
  description: Folio en plataforma InfoProbidad
- name: estado
  type: Enum[Pendiente, Presentada, Vencida, Actualizada, Exceptuada]
  default: Pendiente
- name: motivo_excepcion
  type: Text
  nullable: true
  description: Si está exceptuado de declarar
- name: vigente
  type: Boolean
  computed: true
  formula: estado IN (Presentada, Actualizada) AND fecha_vencimiento >= TODAY()
- name: documento_url
  type: String
  nullable: true
invariants:
- name: plazo_60_dias
  rule: IF estado = Pendiente AND TODAY() > fecha_vencimiento THEN estado = Vencida
- name: presentacion_antes_vencimiento
  rule: IF estado = Presentada THEN fecha_presentacion <= fecha_vencimiento
