_meta:
  urn: urn:goreos:entity:d_gestion:ENT-GESTION-PROYECTOMEJORA:1.0.0
  type: Entity
  schema: urn:goreos:schema:entity:1.0.0
category: Master
is_abstract: false
attributes:
- name: id_proyecto
  type: String
  key: true
  description: 'Identificador único (ej: PM-2025-001)'
- name: oportunidad_id
  type: String
  fk: ENT-GESTION-OPORTUNIDAD-MEJORA
  nullable: false
  description: Oportunidad que origina el proyecto
- name: titulo
  type: String
  nullable: false
  description: Título del proyecto
- name: descripcion
  type: Text
  nullable: true
  description: Descripción del proyecto
- name: plan_pdca
  type: JSON
  nullable: false
  description: "Estructura PDCA:\n{\n  \"plan\": {\n    \"objetivo\": \"...\",\n \
    \   \"acciones\": [\"...\"],\n    \"recursos\": [\"...\"],\n    \"responsables\"\
    : [\"...\"]\n  },\n  \"do\": {\n    \"actividades\": [\"...\"],\n    \"fechas\"\
    : {\"inicio\": \"...\", \"fin\": \"...\"}\n  },\n  \"check\": {\n    \"indicadores\"\
    : [\"...\"],\n    \"metodo_evaluacion\": \"...\"\n  },\n  \"act\": {\n    \"decision\"\
    : \"Estandarizar|Ajustar|Descartar\",\n    \"acciones_siguientes\": [\"...\"]\n\
    \  }\n}\n"
- name: fase_actual
  type: Enum[Plan, Do, Check, Act, Cerrado]
  default: Plan
  description: Fase actual del ciclo
- name: fecha_inicio
  type: Date
  nullable: false
  description: Inicio del proyecto
- name: fecha_fin_planificada
  type: Date
  nullable: false
  description: Fecha objetivo de cierre
- name: fecha_fin_real
  type: Date
  nullable: true
  description: Fecha real de cierre
- name: dias_atraso
  type: Integer
  computed: true
  formula: "CASE \n  WHEN fecha_fin_real IS NOT NULL \n  THEN DATEDIFF(fecha_fin_real,\
    \ fecha_fin_planificada)\n  WHEN CURRENT_DATE > fecha_fin_planificada \n  THEN\
    \ DATEDIFF(CURRENT_DATE, fecha_fin_planificada)\n  ELSE 0\nEND\n"
- name: responsable_id
  type: String
  fk: ENT-BACK-FUNCIONARIO
  nullable: false
  description: Responsable del proyecto
- name: equipo
  type: Array[String]
  nullable: true
  description: IDs de funcionarios involucrados
- name: metricas_impacto
  type: JSON
  nullable: true
  description: "Métricas de impacto:\n{\n  \"indicador\": \"...\",\n  \"valor_inicial\"\
    : 0,\n  \"valor_meta\": 0,\n  \"valor_final\": 0\n}\n"
- name: roi_estimado
  type: Decimal
  nullable: true
  description: Retorno sobre inversión estimado
- name: estado
  type: Enum[EnCurso, Pausado, Completado, Cancelado]
  default: EnCurso
  description: Estado del proyecto
- name: resultado
  type: Enum[Exitoso, Parcial, Fallido]
  nullable: true
  description: Resultado final
- name: lecciones_aprendidas
  type: Text
  nullable: true
  description: Aprendizajes del proyecto
- name: estandarizado
  type: Boolean
  default: false
  description: ¿La mejora se estandarizó?
invariants:
- id: INV-PM-001
  name: completado_requiere_resultado
  rule: estado = 'Completado' → resultado IS NOT NULL
  description: Proyecto completado debe tener resultado
  severity: error
- id: INV-PM-002
  name: check_requiere_metricas
  rule: fase_actual IN ('Check', 'Act', 'Cerrado') → metricas_impacto IS NOT NULL
  description: Fase Check requiere métricas
  severity: warning
id: ENT-GESTION-PROYECTOMEJORA
urn: urn:goreos:entity:d_gestion:ENT-GESTION-PROYECTOMEJORA:1.0.0
name: Proyectomejora
domain: D-GESTION
